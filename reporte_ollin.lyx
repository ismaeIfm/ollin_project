#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\use_hyperref false
\papersize default
\use_geometry false
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Reporte Olin
\end_layout

\begin_layout Section*
Respaldo Olin:
\end_layout

\begin_layout Standard
Se prendió el host master del sistema ollin, en él se empaquetaron los ficheros
 
\emph on
/var
\emph default
, 
\emph on
/etc
\emph default
 y 
\emph on
/opt
\emph default
 y se guardaron los 
\emph on
.tar
\emph default
 en el 
\emph on
home
\emph default
 de esté:
\end_layout

\begin_layout Itemize

\emph on
ollin$ tar cvf /home/var.tar /var/
\end_layout

\begin_layout Itemize

\emph on
ollin$ tar cvf /home/etc.tar /etc/
\end_layout

\begin_layout Itemize

\emph on
ollin$ tar cvf /home/opt.tar /opt/
\end_layout

\begin_layout Standard
Estó debido a que el host master tiene dos discos duros uno de 
\emph on
80GB
\emph default
 y otro de 
\emph on
1.5TB
\emph default
, el disco de
\emph on
 1.5TB
\emph default
 es aquél donde se encuentra el sistema de archivos 
\emph on
/home
\emph default
 y en el disco de 
\emph on
80GB
\emph default
 se encontraba el sistema base.
 Con esto conseguimos almacenar el respaldo de ollin en el disco de 
\emph on
1.5TB
\emph default
, además de que en ese disco ya se encontraban los archivos de las cuentas
 existentes en ollin.
\end_layout

\begin_layout Standard
Debido a que algunos usuarios tenían espacio en disco en los nodos de ollin,
 se busco que nodos eran y que tenían:
\end_layout

\begin_layout Itemize

\emph on
ollin$ cat /etc/fstab
\end_layout

\begin_layout Standard
El comando mostrado anteriormente nos muestra que ficheros externos se montan
 en el sistema.
 Con lo que se procedió a prender cada uno de ellos y montar las directorios
 en ollin-master.
 Se creo el directorio scratches en el 
\emph on
home
\emph default
 de ollin para guardar ahí los respaldos de los usuarios con memoria extra:
\end_layout

\begin_layout Itemize

\emph on
ollin$ mkdir /home/scratches
\end_layout

\begin_layout Standard
Y se procedio a ingresar a los nodos via 
\emph on
ssh
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin$ ssh ollin-1
\end_layout

\begin_layout Standard
El primer nodo(ollin-1) después de iniciar el servicio 
\emph on
nfs
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin-1$ /etc/init.d/nfs start
\end_layout

\begin_layout Standard
Montó sin problemas el fichero que contenía, por lo cual se realizo el respaldo
 sin complicaciones.
\end_layout

\begin_layout Itemize

\emph on
ollin$ tar cvf /home/scratch/soullard.tar /home/soullard/scratches
\end_layout

\begin_layout Itemize

\emph on
ollin$ ssh ollin-2
\end_layout

\begin_layout Standard
El segundo nodo (ollin-2) no pudo montar los ficheros que contenía después
 de reiniciar el servicio 
\emph on
ntfs
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ /etc/init.d/nfs start
\end_layout

\begin_layout Standard
Por lo que tras varios intentos por lograr esto, reiniciando los servicios
 que logran lo antes mencionado, además de parar aquellos servicios a que
 nuestro criterio podían impedir el montaje satisfacctorio.
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ /etc/init.d/nfs (stop|star)
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ /etc/init.d/netfs (stop|star)
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ /etc/init.d/iptables (stop|start)
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ /etc/init.d/nfs.lock (stop|start)
\end_layout

\begin_layout Standard
(Estas acciones se realizaron repetidamente en varias ocaciones y no necesariame
nte en el mismo orden, ni todas a la vez, así mismo se revisaban los mensajes
 buscando que provocaba que no se pudieran montar los ficheros que ollin-2
 contenía).
\end_layout

\begin_layout Standard
Al no encontrar la causa de procedió a hacer el empaquetado via 
\emph on
ssh
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin-2$ tar - cvf /scratches/abl/ | ssh ollin 
\begin_inset Quotes eld
\end_inset

cat > /home/scratches/abl.tar
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize

\emph on
ollin-2$ tar - cvf /scratches/rivas/ | ssh ollin 
\begin_inset Quotes eld
\end_inset

cat > /home/scratches/rivas.tar
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
El tercer nodo(ollin-3) no pudo iniciar sistema, después de una minuciosa
 revisión a los mensajes de error, nos dimos cuenta que el disco se encontraba
 dañado.
\end_layout

\begin_layout Standard
El cuarto nodo(ollin-4) al igual que ollin-2 no pudo montar el directorio
 que contenía por lo que se opto por seguir el empaquetado via 
\emph on
ssh
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin-4$ tar - cvf /scratches/huziel/ | ssh ollin 
\begin_inset Quotes eld
\end_inset

cat > /home/scratches/huziel.tar
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
El quinto nodo(ollin-5) al igual que ollin-4 y ollin-2 no pudo montar los
 directorios que contenía por lo que se opto por el empaquetado via 
\emph on
ssh
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
ollin-5$ tar - cvf /scratches/eduardor/ | ssh ollin 
\begin_inset Quotes eld
\end_inset

cat > /home/scratches/eduardor.tar
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize

\emph on
ollin-5$ tar - cvf /scratches/lperez/ | ssh ollin 
\begin_inset Quotes eld
\end_inset

cat > /home/scratches/lperez.tar
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Los demás nodos no contenían archivos a respaldar.
\end_layout

\begin_layout Section*
Instalación Rocks:
\end_layout

\begin_layout Standard
Rocks es una distribución de Linux enfocada a clusters de cómputo de alto
 rendimiento.
 Las versiones modernas de Rocks están basadas en CentOS con una versión
 modificada del instalador Anaconda que simplifica la instalación masiva
 en muchas computadoras.
\end_layout

\begin_layout Standard
Para la instalación de Rocks se opto por descargar la imagen ISO del DVD
 de Rocks, la cual una vez descargada se quemó en un DVD.
\end_layout

\begin_layout Standard
Después de procedio a instalar Rocks al equipo master.
 Se introdujo el DVD en la unidad óptica del host.
 Se cambio el orden de booteo de la máquina desde la BIOS para que iniciara
 desde DVD y antes de guardar los cambios nos encontramos con una opcion
 llamada 
\emph on

\begin_inset Quotes eld
\end_inset

OS instalation mode
\begin_inset Quotes erd
\end_inset


\emph default
 la cual se encontraba apagada por lo que intuitivamente nos dijo que debiamos
 prenderla y lo hicimos.
\end_layout

\begin_layout Standard
Después se dejo a la computadora a iniciar de manera normal booteando el
 DVD, despues del inicio de la BIOS esta nos arrojo un mensaje que decia:
 
\emph on

\begin_inset Quotes eld
\end_inset

Amount of memory limited to 256 MB
\begin_inset Quotes erd
\end_inset


\emph default
, lo cual nos parecio sospechoso pero decidimos continuar.
 Inmediatamente despues nos encontramos con el mensaje 
\emph on

\begin_inset Quotes eld
\end_inset

No booteable device found
\begin_inset Quotes erd
\end_inset


\emph default
 por lo que revisamos la unidad óptica para darnos cuenta que esta no contenia
 lector DVD, por lo que procedimos a pedir prestado uno con el Lic.
 Neptalí González Gómez.
 Despúes de instalar la unidad óptica procedimos con la instalación aunque
 aun se encontraba presente el mensaje 
\emph on

\begin_inset Quotes eld
\end_inset

Amount of memory limited to 256 MB
\begin_inset Quotes erd
\end_inset


\emph default
, el DVD fue booteado y nos prensento la siguiente pantalla:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename splash.png
	width 10cm

\end_inset


\end_layout

\begin_layout Standard
En la cual escribimos el comando build para crear un nuevo frontend.
 Una vez tecleado esto la instalación nos mostro el mensaje:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted1.png
	width 10cm

\end_inset


\end_layout

\begin_layout Standard
Despúes de buscar en internet supimos que la opción 
\emph on

\begin_inset Quotes eld
\end_inset

OS instalation mode
\begin_inset Quotes erd
\end_inset

 
\emph default
era la causante de la poca memoria, por lo que apagamos la opción y procedimos
 a una nueva instalación.
 Esta vez depués de teclear build llegamos a la siguiente pantalla:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted2.png
	width 10cm

\end_inset


\end_layout

\begin_layout Standard
En la cual elegimos los 
\begin_inset Quotes eld
\end_inset

rolls
\begin_inset Quotes erd
\end_inset

 desde el DVD.
 Una vez seleccionado esto, elegimos los 
\begin_inset Quotes eld
\end_inset

rolls
\begin_inset Quotes erd
\end_inset

 a instalar:
\end_layout

\begin_layout Itemize
area 51, base, bio, fingerprint, ganglia, hpc, htcondor, Java, kernel, kvm,
 os, perfSONAR, perl, Python, sge, web-server, zfs-Linux
\end_layout

\begin_layout Standard
Una vez elegidos los 
\begin_inset Quotes eld
\end_inset

rolls
\begin_inset Quotes erd
\end_inset

 el sistema nos pedia llenar la información del cluster:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted3.png
	width 10cm

\end_inset


\end_layout

\begin_layout Itemize
Fully-Qualified Host Name: ollin.fisica.unam.mx
\end_layout

\begin_layout Itemize
Cluster Name: Ollin
\end_layout

\begin_layout Itemize
Certificate Organization: UNAM
\end_layout

\begin_layout Itemize
Certificate Locality: Ciudad de México
\end_layout

\begin_layout Itemize
Certificate State: D.F.
\end_layout

\begin_layout Itemize
Cerrtificate Country: MX
\end_layout

\begin_layout Itemize
Contact: natorro@fisica.unam.mx
\end_layout

\begin_layout Itemize
URL: http://www.fisica.unam.mx
\end_layout

\begin_layout Itemize
Latitude/Longitude: N19.19 W99.10
\end_layout

\begin_layout Standard
Después de introducir los datos procedimos con la configuración de la red:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted4.png
	width 10cm

\end_inset


\end_layout

\begin_layout Itemize
Publica:
\end_layout

\begin_deeper
\begin_layout Itemize
eth1
\end_layout

\begin_layout Itemize
IP address: 132.248.7.64
\end_layout

\begin_layout Itemize
Netmask: 255.255.255.0
\end_layout

\end_deeper
\begin_layout Itemize
Privada:
\end_layout

\begin_deeper
\begin_layout Itemize
eth0
\end_layout

\begin_layout Itemize
IP address: 192.168.40.254
\end_layout

\begin_layout Itemize
Netmask: 255.255.255.0
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Graphics
	filename pasted6.png
	width 10cm

\end_inset


\end_layout

\begin_layout Itemize
Gateway: 132.248.7.254
\end_layout

\begin_layout Itemize
DNS Server: 132.248.10.2
\end_layout

\begin_layout Standard
Después se establecio la contraseña:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted7.png
	width 10cm

\end_inset


\end_layout

\begin_layout Standard
Y se confiuro el tiempo:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted8.png
	width 10cm

\end_inset


\end_layout

\begin_layout Itemize
Time Zone: America/Mexico_City
\end_layout

\begin_layout Itemize
NTP Server: pool.ntp.org
\end_layout

\begin_layout Standard
Y se procedio al particionado del disco:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted9.png
	width 10cm

\end_inset


\end_layout

\begin_layout Standard
En la cual se decidio por Manual Partitioning y se decidio por una tabla
 de particiones como la que sigue:
\end_layout

\begin_layout Standard
(El disco de capacidad 80GB fue usado).
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Partition Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Size
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
swap
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2GB
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
/
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
restante del disco*
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Y después se procedio con la instalación del sistema:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename pasted10.png
	width 10cm

\end_inset


\end_layout

\end_body
\end_document
